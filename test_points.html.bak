<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Points System Test</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #ff9500 100%);
            padding: 20px;
            color: white;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
        }
        
        .points-display {
            font-size: 24px;
            margin: 20px 0;
            text-align: center;
        }
        
        .btn {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
        }
        
        .btn:hover {
            background: #f7931e;
        }
        
        .stats {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>π† ν¬μΈνΈ μ‹μ¤ν… ν…μ¤νΈ</h1>
        
        <div class="points-display">
            ν„μ¬ ν¬μΈνΈ: <span id="currentPoints">0</span>
        </div>
        
        <div>
            <button class="btn" onclick="addTestPoints(100, 'drum_beat')">λ“λΌ λΉ„νΈ ν¬μΈνΈ μ¶”κ°€ (+100)</button>
            <button class="btn" onclick="addTestPoints(250, 'galaxy_war')">κ°¤λ­μ‹ μ› ν¬μΈνΈ μ¶”κ°€ (+250)</button>
            <button class="btn" onclick="addTestPoints(500, 'test_game')">ν…μ¤νΈ κ²μ„ ν¬μΈνΈ μ¶”κ°€ (+500)</button>
        </div>
        
        <div>
            <button class="btn" onclick="showStats()">ν†µκ³„ λ³΄κΈ°</button>
            <button class="btn" onclick="resetPoints()">ν¬μΈνΈ μ΄κΈ°ν™”</button>
        </div>
        
        <div class="stats" id="stats" style="display: none;">
            <h3>π“ ν†µκ³„</h3>
            <div id="statsContent"></div>
        </div>
        
        <div class="stats">
            <h3>π“ λ΅κ·Έ</h3>
            <div id="log"></div>
        </div>
    </div>

    <script src="js/gamePoints.js"></script>
    <script>
        function updateDisplay() {
            document.getElementById('currentPoints').textContent = window.getTotalPoints().toLocaleString();
        }

        function addTestPoints(points, gameId) {
            const gameInfo = {
                score: points * 10,
                accuracy: Math.floor(Math.random() * 100),
                combo: Math.floor(Math.random() * 50),
                playTime: Math.floor(Math.random() * 300),
                isNewRecord: Math.random() > 0.8
            };

            const totalEarned = window.addGamePoints(points * 10, gameId, gameInfo);
            log(`${gameId}: ${totalEarned} ν¬μΈνΈ νλ“! (μ΄ ${window.getTotalPoints()} ν¬μΈνΈ)`);
            updateDisplay();
        }

        function showStats() {
            const stats = window.getGameStats();
            const statsDiv = document.getElementById('stats');
            const content = document.getElementById('statsContent');
            
            content.innerHTML = `
                <p><strong>μ΄ κ²μ„ ν”λ μ΄:</strong> ${stats.totalGamesPlayed}ν</p>
                <p><strong>μ΄ ν”λ μ΄ μ‹κ°„:</strong> ${Math.round(stats.totalPlayTime / 60)}λ¶„</p>
                <p><strong>μ—°μ† ν”λ μ΄:</strong> ${stats.streak}μΌ</p>
                <p><strong>ν„μ¬ λ λ²¨:</strong> ${window.gamePoints.getCurrentLevel()}</p>
                <p><strong>λ‹¤μ λ λ²¨κΉμ§€:</strong> ${window.gamePoints.getPointsToNextLevel()} ν¬μΈνΈ</p>
                <p><strong>λ„μ „κ³Όμ :</strong> ${stats.achievements.length}κ°</p>
                <h4>κ²μ„λ³„ ν†µκ³„:</h4>
                ${Object.keys(stats.gameStats).map(game => 
                    `<p>${game}: ${stats.gameStats[game].playCount}ν ν”λ μ΄, ${stats.gameStats[game].totalPoints} ν¬μΈνΈ</p>`
                ).join('')}
            `;
            
            statsDiv.style.display = statsDiv.style.display === 'none' ? 'block' : 'none';
        }

        function resetPoints() {
            if (confirm('μ •λ§λ΅ λ¨λ“  ν¬μΈνΈμ™€ ν†µκ³„λ¥Ό μ΄κΈ°ν™”ν•μ‹κ² μµλ‹κΉ?')) {
                window.gamePoints.resetPoints();
                window.gamePoints.resetStats();
                updateDisplay();
                log('ν¬μΈνΈ μ‹μ¤ν… μ΄κΈ°ν™”λ¨');
            }
        }

        function log(message) {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML = `<div>[${timestamp}] ${message}</div>` + logDiv.innerHTML;
        }

        // Listen for achievement notifications
        window.addEventListener('pointsEarned', (event) => {
            log(`ν¬μΈνΈ νλ“ μ΄λ²¤νΈ: ${event.detail.points} ν¬μΈνΈ`);
        });

        // Initialize display
        updateDisplay();
        log('ν¬μΈνΈ μ‹μ¤ν… ν…μ¤νΈ νμ΄μ§€ λ΅λ“λ¨');
    </script>
</body>
</html>